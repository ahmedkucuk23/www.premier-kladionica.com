"use strict";(self.webpackChunkremote_ttx=self.webpackChunkremote_ttx||[]).push([[179],{8914:(e,t,n)=>{var a=n(7294),r=n(3935),c=n(2956),u=n(6372),l=function(){return(0,u.I0)()},o=u.v9,i=n(5567),s=n(7766),p=n.n(s),m=function(){if(window.ga)try{var e,t=window.location.pathname,n=t.split("/"),a=(0,i.Z)(n,5),r=a[3],c=a[4];window.ga("set","page",t),window.ga("set","title",p()(e="".concat(r,"/")).call(e,c)),window.ga("send","pageview")}catch(e){}},v={serverURL:"https://push-replication-web.premier-kladionica.com/push-replication-api",serverSignalRPath:"pushReplicationHub",bearerAuthUsername:"PushReplicationUser",bearerAuthPassword:"HaPwbRg3FuWGaki4ZrQt4bNPg"},g=(0,c.createReplicationClient)({schema:{pages:{TTXPageID:{key:"100",isID:!0},rv:{key:"v"},naziv:{key:"a"},subpageCount:{key:"b"}},subpages:{TTXSubPageID:{key:"101",isID:!0},rv:{key:"v"},imageVersion:{key:"a"}}},config:v});const b=function(){return a.createElement("div",{className:"ttxInitErr"},a.createElement("div",{className:"ttxDialog"},"Poteškoće u povezivanju sa teletekst servisom ...",a.createElement("br",null),"Novi pokušaji spajanja se nastavljaju ..."))},f=function(){return a.createElement("div",{className:"ttxLoader"})};var E,d=n(3938),T=n(3109),P=n.n(T),k=n(2991),S=n.n(k),h=n(4198),N=n.n(h),w=n(4399),C=";";!function(e){e[e.PREV_PAGE=0]="PREV_PAGE",e[e.NEXT_PAGE=1]="NEXT_PAGE",e[e.PREV_SUBPAGE=2]="PREV_SUBPAGE",e[e.NEXT_SUBPAGE=3]="NEXT_SUBPAGE"}(E||(E={}));var y=n(4473),I=n.n(y),A=function(){var e=window.location.pathname.split("/"),t=(0,i.Z)(e,5);return[t[3],t[4]]};var D=(0,w.createSlice)({name:"activeSubpage",initialState:"",reducers:{setActivePage:function(e,t){return m(),"".concat(t.payload)}},extraReducers:function(e){e.addCase(c.ReplicatedStoreActionTypes.FETCH_SUBSCRIBE_FULFILLED,(function(e,t){var n,a,r,c,u,l,o,s,m=A(),v=(0,i.Z)(m,2),g=v[0],b=v[1],f=p()(n=p()(a="".concat(g)).call(a,C)).call(n,b),E=t.payload;return I()(r=E.pages).call(r,(function(e){return e.TTXPageID===g}))?I()(c=E.subpages).call(c,(function(e){return e.TTXSubPageID===f}))?f:(window.history.replaceState("","",p()(o="".concat("/remote-module/remote-ttx","/")).call(o,g,"/1/")),p()(s="".concat(g)).call(s,C,"1")):(window.history.replaceState("","",p()(u="".concat("/remote-module/remote-ttx","/")).call(u,"661","/1/")),p()(l="".concat("661")).call(l,C,"1"))})).addCase(c.ReplicatedStoreActionTypes.UPDATE,(function(e,t){var n,a=e.split(C),r=(0,i.Z)(a,2),c=r[0],u=r[1],l=t.payload;if(!l.pages)return e;var o,s,m=I()(n=l.pages).call(n,(function(e){return e.TTXPageID===c}));return void 0!==(null==m?void 0:m.subpageCount)&&N()(u)>m.subpageCount?(window.history.replaceState("","",p()(o="".concat("/remote-module/remote-ttx","/")).call(o,c,"/1/")),p()(s="".concat(c)).call(s,C,"1")):e}))}}),X=D.actions.setActivePage;const x=D.reducer;var R=(0,w.createAsyncThunk)("subpages/relativeNav",function(){var e=(0,d.Z)(P().mark((function e(t,n){var a,r,c,u,l,o,i;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=t.pageNumber,o=t.subpageNumber,i=n.dispatch,window.history.pushState("","",p()(a=p()(r="".concat("/remote-module/remote-ttx","/")).call(r,l,"/")).call(a,o,"/")),i(X(p()(c=p()(u="".concat(l)).call(u,C)).call(c,o)));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_=(0,w.createAsyncThunk)("subpages/relativeNav",function(){var e=(0,d.Z)(P().mark((function e(t,n){var a,r,c,u,l,o,s,m,v,b,f,d;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=n.getState,l=n.dispatch,o=u(),s=g.selectors.pages(o),m=g.selectors.subpages(o),v=S()(a=o.activeSubpage.split(C)).call(a,(function(e){return N()(e)})),b=(0,i.Z)(v,2),f=b[0],d=b[1],e.t0=t,e.next=e.t0===E.NEXT_PAGE?8:e.t0===E.PREV_PAGE?12:e.t0===E.NEXT_SUBPAGE?16:e.t0===E.PREV_SUBPAGE?20:24;break;case 8:if(s["".concat(f+1)]){e.next=10;break}return e.abrupt("return");case 10:return l(R({pageNumber:"".concat(f+1),subpageNumber:"1"})),e.abrupt("break",24);case 12:if(s["".concat(f-1)]){e.next=14;break}return e.abrupt("return");case 14:return l(R({pageNumber:"".concat(f-1),subpageNumber:"1"})),e.abrupt("break",24);case 16:if(m[p()(r=p()(c="".concat(f)).call(c,C)).call(r,d+1)]){e.next=18;break}return e.abrupt("return");case 18:return l(R({pageNumber:"".concat(f),subpageNumber:"".concat(d+1)})),e.abrupt("break",24);case 20:if(1!==d){e.next=22;break}return e.abrupt("return");case 22:return l(R({pageNumber:"".concat(f),subpageNumber:"".concat(d-1)})),e.abrupt("break",24);case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());var G=function(e){return e.activeSubpage.replace(C,"/")};const Z=function(){var e=o(G);return a.createElement("div",{className:"ttxActivePageC"},e)};var U=n(3805),j=n.n(U);const L=function(){var e=a.useState(j()()),t=(0,i.Z)(e,2),n=t[0],r=t[1];return n?a.createElement("div",{className:"ttxMobileIntro",onClick:function(){return r(!1)},onTouchStart:function(){return r(!1)}},a.createElement("p",null,"Za prikaz preko cijelog ekrana dotaknite bilo gdje unutar prikazane teletext stranice"),a.createElement("img",{src:"".concat("/remote-module/remote-ttx","/img/mobile-touch-icon-small.png")}),a.createElement("p",null,"Sada taknite bilo gdje kako bi ova poruka bila skrivena ...")):null};var V=n(6295),B=n.n(V),H=n(2366),F=n.n(H),O=function(e){var t=e.TTXPageID,n=e.active,r=l(),c=o(g.selectors.pages);return a.createElement(a.Fragment,null,a.createElement("span",{title:c[t].naziv,className:"cellC active_".concat(n?"true":"false"),onClick:function(){return r(R({pageNumber:t,subpageNumber:"1"}))}},t))},z=function(e){var t,n=g.selectors.pages(e),a=e.activeSubpage.split(C),r=(0,i.Z)(a,1)[0];return S()(t=B()(n)).call(t,(function(e){var t=(0,i.Z)(e,2),n=t[0];return{TTXPageID:t[1].TTXPageID,active:n===r}}))},q=function(e,t){return F()(e).call(e,(function(e,n){var a=n.TTXPageID,r=n.active;if(0===t.length)return!1;var c=I()(t).call(t,(function(e){return e.TTXPageID===a})).active;return e&&r===c}),!1)};const M=function(){var e=o(z,q);return a.createElement("div",{className:"ttxPagesC modC"},a.createElement("div",{className:"tableC noselect"},S()(e).call(e,(function(e){var t=e.TTXPageID,n=e.active;return a.createElement(O,{key:t,TTXPageID:t,active:n})}))))},Q=function(e){var t=(0,a.useRef)();return(0,a.useEffect)((function(){t.current=e})),t.current};var W=n(2007),J=n(6902),K=n.n(J),Y=n(4310),$=n.n(Y),ee=n(4074),te=n.n(ee),ne=n(3823),ae=n.n(ne),re=n(9649),ce=n.n(re),ue=n(368),le=n.n(ue),oe=n(3978),ie=n.n(oe),se=n(2149),pe=n(116),me=n.n(pe),ve=n(455),ge=n.n(ve),be=n(573);function fe(e,t){var n=K()(e);if($()){var a=$()(e);t&&(a=me()(a).call(a,(function(t){return te()(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n,a,r=null!=arguments[t]?arguments[t]:{};t%2?ae()(n=fe(Object(r),!0)).call(n,(function(t){(0,se.Z)(e,t,r[t])})):ce()?le()(e,ce()(r)):ae()(a=fe(Object(r))).call(a,(function(t){ie()(e,t,te()(r,t))}))}return e}var de=g.selectors.pages,Te=g.selectors.subpages,Pe=(0,be.P1)(Te,de,(function(e){return e.activeSubpage}),(function(e,t,n){var a,r,c=n.split(C),u=(0,i.Z)(c,1)[0],l=t[u];return S()(a=me()(r=ge()(e)).call(r,(function(e){var t=e.TTXSubPageID.split(C),n=(0,i.Z)(t,2),a=n[0],r=n[1];return a===u&&N()(r)<=(null==l?void 0:l.subpageCount)}))).call(a,(function(e,t,a){return Ee(Ee({},e),{},{active:e.TTXSubPageID===n,subpageCount:a.length})}))})),ke=function(e,t){return e.length===t.length&&F()(e).call(e,(function(e,n,a){return e&&t[a].active===n.active&&t[a].imageVersion===n.imageVersion}),!1)},Se=(0,be.P1)(Te,(function(e){return e.activeSubpage}),(function(e,t){var n;return I()(n=ge()(e)).call(n,(function(e){return e.TTXSubPageID==t}))})),he=function(e,t){var n,a,r,c=e.split(C),u=(0,i.Z)(c,2),l=u[0],o=u[1];return p()(n=p()(a=p()(r="".concat(v.serverURL,"/api/TTXSubPage/GetImage?ttxPageID=")).call(r,l,"&ttxSubPageID=")).call(a,o,"&rv=")).call(n,t)},Ne=function(e){j()()&&(e.currentTarget,W.Z.requestFullscreen(document.body))};const we=function(){var e=o(Se),t=e?'url("'.concat(he(e.TTXSubPageID,e.imageVersion),'")'):"",n=Q(t);return e?a.createElement(a.Fragment,null,a.createElement("div",{className:"ttxCurrImg",style:{backgroundImage:t},key:t,onTouchStart:Ne}),t===n?null:a.createElement("div",{className:"ttxPrevImg",style:{backgroundImage:n},key:n,onTouchStart:Ne})):null};var Ce=n(3126),ye=function(e){var t,n,r=e.TTXSubPageID,c=e.subpageCount,u=e.active,o=e.imageVersion,i=l(),s=r.split(C)[1],m='url("'.concat(he(r,o),'")'),v=Q(m);return a.createElement("div",{className:"ttxThumb active_".concat(u?"true":"false"),onClick:function(){return i(X(r))}},a.createElement("div",{className:"ttxCurrThumb",style:{backgroundImage:m},key:m},a.createElement("span",null,p()(t="".concat(s,"/")).call(t,c))),m===v?null:a.createElement("div",{className:"ttxPrevThumb",style:{backgroundImage:v},key:v},a.createElement("span",null,p()(n="".concat(s,"/")).call(n,c))))};const Ie=function(){var e,t=o(Pe,ke);return a.createElement("div",{className:"ttxThumbC modC"},S()(e=ge()(t)).call(e,(function(e){return a.createElement(ye,(0,Ce.Z)({key:"".concat(e.TTXSubPageID)},e))})))},Ae=function(){var e=o(g.selectors.hubConnectionStatus),t=Q(e);return e===c.HubConnectionStatus.FAILED||e===c.HubConnectionStatus.CONNECTED&&t===c.HubConnectionStatus.FAILED?a.createElement("div",{className:"ttxComErr modC"},"Poteškoće u komunikaciji sa teletekst servisom ..."):null},De=function(){return e=l(),(0,a.useEffect)((function(){var t=function(t){switch(t.key){case"ArrowLeft":_(E.PREV_PAGE),e(_(E.PREV_PAGE));break;case"ArrowRight":e(_(E.NEXT_PAGE));break;case"ArrowUp":e(_(E.PREV_SUBPAGE));break;case"ArrowDown":e(_(E.NEXT_SUBPAGE))}};return window.addEventListener("keyup",t),function(){return window.removeEventListener("keyup",t)}}),[]),function(){var e=l();(0,a.useEffect)((function(){return window.onpopstate=function(t){var n,a,r=A(),c=(0,i.Z)(r,2),u=c[0],l=c[1];e(X(p()(n=p()(a="".concat(u)).call(a,C)).call(n,l)))},function(){window.onpopstate=null}}),[])}(),a.createElement(a.Fragment,null,a.createElement(M,null),a.createElement(Z,null),a.createElement(Ie,null),a.createElement(we,null),a.createElement(Ae,null),a.createElement(L,null));var e},Xe=function(){var e,t,n=o(g.selectors.hubConnectionStatus);switch(e=n,t=l(),(0,a.useEffect)((function(){switch(e){case c.HubConnectionStatus.DISCONNECTED:case c.HubConnectionStatus.FAILED:t(g.connect()).then((function(){t(g.query.getEntityByPath("TTXPage/SubscribeToAllTTXPages"))})),function(e,t){if(window.ga)try{window.ga("send","event","TTX:SignalR",t)}catch(e){}}(0,e===c.HubConnectionStatus.DISCONNECTED?"disconnected":"connection failed")}}),[e]),n){case c.HubConnectionStatus.INITIAL:case c.HubConnectionStatus.CONNECTING:return a.createElement(f,null);case c.HubConnectionStatus.FAILED:return a.createElement(b,null);case c.HubConnectionStatus.CONNECTED:return a.createElement(De,null);default:return null}},xe=function(){return a.createElement(Xe,null)};function Re(e,t){var n=K()(e);if($()){var a=$()(e);t&&(a=me()(a).call(a,(function(t){return te()(e,t).enumerable}))),n.push.apply(n,a)}return n}const _e=(0,w.configureStore)({reducer:function(e){for(var t=1;t<arguments.length;t++){var n,a,r=null!=arguments[t]?arguments[t]:{};t%2?ae()(n=Re(Object(r),!0)).call(n,(function(t){(0,se.Z)(e,t,r[t])})):ce()?le()(e,ce()(r)):ae()(a=Re(Object(r))).call(a,(function(t){ie()(e,t,te()(r,t))}))}return e}({activeSubpage:x},g.reducers)});var Ge=document.getElementById("app");_e.dispatch(g.connect()).then((function(){_e.dispatch(g.query.getEntityByPath("TTXPage/SubscribeToAllTTXPages"))})),m(),r.render(a.createElement(u.zt,{store:_e},a.createElement(xe,null)),Ge)}},e=>{e.O(0,[216],(()=>(8914,e(e.s=8914)))),e.O()}]);
//# sourceMappingURL=main.983acb1f07ac91bc20ac.js.map